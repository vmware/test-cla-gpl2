# Auto-managed; DO NOT EDIT MANUALLY
# Stub Version: 14
name: CLA â€” Trigger

on:
  pull_request_target:
    types: [opened, synchronize, reopened, ready_for_review]
  issue_comment:
    types: [created, edited]

jobs:
  cla:
    name: Call reusable CLA checker
    # run on PRs, or when a signing comment *or* recheck is posted
    if: >
      ${ github.event_name == 'pull_request_target' ||
          (
            github.event_name == 'issue_comment' &&
            github.event.issue.pull_request &&
            (
              contains(github.event.comment.body, { sign_comment_exact | tojson }) ||
              startsWith(github.event.comment.body, 'recheck') ||
              startsWith(github.event.comment.body, '/recheck')
            )
          )
      }
   permissions:
        contents: read
        pull-requests: write
        issues: write
        statuses: write
        actions: read
    uses: vmware/.github/.github/workflows/reusable-cla-check.yml@main
    with:
      allowlist_branch: "main"
      allowlist_path: "cla/allowlist.yml"
      sign_comment_exact: "I have read the CLA Document and I hereby sign the CLA"
    secrets:
      # preserve existing mapping: pass repo/org secret <secret_name> into the reusable as CONTRIBUTOR_ASSISTANT_PAT
      CONTRIBUTOR_ASSISTANT_PAT: ${{ secrets.CLA_ASSISTANT_PAT }}
